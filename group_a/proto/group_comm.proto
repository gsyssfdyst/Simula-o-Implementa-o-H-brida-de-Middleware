// group_a/proto/group_comm.proto
syntax = "proto3";

package group_a;

message MessageRequest {
    int32 sender_id = 1;
    string message = 2;
    int64 lamport_time = 3;
    string client_version = 4; // New field with client version info
}

message MessageReply {
    string response = 1;
    int64 lamport_time = 2;
}

message ElectionMessage {
    int32 candidate_id = 1;
}

message NewLeaderMessage { // renamed from VictoryMessage
    int32 leader_id = 1;
}

message ResponseMessage {
    bool success = 1;
}

message HeartbeatRequest {
    int32 node_id = 1;
}

message HeartbeatResponse {
    bool alive = 1;
}

service GroupAService { // renamed from GroupComms
    rpc SendMessage (MessageRequest) returns (MessageReply);
    rpc Election (ElectionMessage) returns (ResponseMessage);
    rpc NewLeader (NewLeaderMessage) returns (ResponseMessage);
    rpc Heartbeat (HeartbeatRequest) returns (HeartbeatResponse);
}